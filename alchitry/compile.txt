# this is a top level compile.txt file
#
# this file is pulled in by build_fpga via scripts/compile_file_generation
#
# order is important for modelsim


######################################
## common compile files
######################################

# default library "work" is set to shure in pytest scripts
#rtl/xapp523/glbl.v 

###################################
## External Modules
###################################

#These modules are used in the datapath


######################################
## added for product/golden build only
######################################
rtl/compile.txt


# ac701 stuff
# this is a top level compile.txt file following the convention that src and modules are at the same level as rtl

# Xilinx IP Files
# dont_touch_xci tells our framework to leave the ip as an xci and include in Vivado prj as such
# otherwise it defaults to unpack and generates source files and expects you to manually add the source

`IF BUILDr
rtl/clk_wiz_100M/clk_wiz_100M.xci --dont_touch_xci
`IF SIM
#rtl/clk_wiz_200M/clk_wiz_200M_sim.v
`END

# debug comes first to avoid order dependence with telemetry and serial_link
#rtl/debug/compile.txt


rtl/version_pkg.vhd
# this file is generated by dpsm_rx and must be generated in place correctly for sim or build
# ideally it should not be committed to version control, but could be in a .bak or .generated or .zip or in artifactory or something else.
#modules/dpsm_rx/rtl/datapath/rtl/telemetry/telemetry_cfg_pkg.vhd
# reverted back to where it gets generated the old way
rtl/telemetry_cfg_pkg.vhd

#src/shurewireless-telemetry/fpga/rtl/compile.txt
scripts/fpgabuild/fpga/rtl/compile.txt



`IF BUILD
rtl/gt_ip/gt_serial_telem_rx.xci --dont_touch_xci

`IF SIM
# dummy black-box for sim
rtl/gt_ip/sim/gt_serial_telem_rx.vhd 
`END

# more debug

# debug xci's from example design, etc.
`IF BUILD
rtl/gt_support/ila_gt_rx_0/ila_gt_rx_0.xci --dont_touch_xci
rtl/gt_support/ila_1/ila_1.xci --dont_touch_xci
rtl/gt_support/vio_0/vio_0.xci --dont_touch_xci
rtl/debug/ila_8x8/ila_8x8.xci --dont_touch_xci
`IF SIM
# dummy black-box for sim
rtl/gt_support/ila_gt_rx_0/sim/ila_gt_rx_0.vhd
rtl/gt_support/ila_1/sim/ila_1.vhd	
rtl/gt_support/vio_0/sim/vio_0.vhd	
rtl/debug/ila_8x8/sim/ila_8x8.vhd
`END

# vio for setting the destination mac address
`IF BUILD
rtl/debug/vio_eth/vio_eth.xci --dont_touch_xci
`IF SIM
#rtl/debug/vio_eth/vio_eth.xci
# dummy vio eth
rtl/debug/vio_eth/sim/vio_eth.vhd 
`END


# frame generator from ex design
rtl/gt_support/gt_rom_init_rx.dat
rtl/gt_support/gt_rom_init_tx.dat
# rtl/gt_support/gt_serial_telem_rx_exdes.vhd # removed because it doesn't match
#rtl/gt_support/gt_serial_telem_rx_gt_frame_check.vhd
#rtl/gt_support/gt_serial_telem_rx_gt_frame_gen.vhd

`IF BUILD
rtl/ip/mmcm_128M_256M/mmcm_128M_256M.v
`IF SIM
rtl/ip/mmcm_128M_256M/mmcm_128M_256M_sim.v
`END

rtl/serial_link/ethernet_telemetry_subsystem.vhd
rtl/serial_link/unpack_telemetry.v
rtl/serial_link/gt_unpack_telemetry.vhd

# subsystem top file
rtl/gt_support/gt_serial_telem_rx_subsystem.vhd




# i2c support (order is important for modelsim)
#rtl/i2c/rtl/I2C_pkg.vhd		
#rtl/i2c/rtl/I2C_master.vhd	
#rtl/i2c_clk_cfg.vhd
#rtl/i2c/rtl/I2C_get_8bits.vhd
#rtl/i2c/rtl/I2C_send_8bits.vhd	
#rtl/i2c/rtl/I2C_start.vhd
#rtl/i2c/rtl/I2C_get_ack.vhd	   
#rtl/i2c/rtl/I2C_send_ack.vhd	
#rtl/i2c/rtl/I2C_stop.vhd

rtl/telemetry_check.v

# top file
rtl/telem_mobile_ac701.v


# xdc constraints
#par/constraints/rgmii_timing.xdc
#par/constraints/user.xdc


######################################
## CONSTRAINTS XDC 
######################################
`IF BUILD
par/constraints/alchitry.xdc
par/constraints/au_props.xdc
#par/constraints/dpsm_pins.xdc
#par/constraints/dpsm_timing.xdc
#par/constraints/dpsm_timing_adc.xdc
## this is for telemetry build only, and is included via compile_telemetry.txt
##par/constraints/dpsm_rx_resource_opt.xdc
##par/constraints/ila.xdc
`END

